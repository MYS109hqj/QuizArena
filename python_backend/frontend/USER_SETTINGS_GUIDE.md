# 用户设置页面使用指南

## 功能概述

用户设置页面是一个完整的用户资料管理界面，提供以下功能：

### 1. 头像设置
- **默认头像选择**：提供4个预设头像选项
- **自定义头像上传**：支持上传本地图片
- **头像裁剪功能**：使用 VueCropper 进行精确裁剪
- **实时预览**：实时显示当前选择的头像

### 2. 用户信息管理
- 用户名修改
- 用户统计信息显示（游戏次数、胜率）

### 3. 应用设置
- 游戏通知开关
- 音效开关

## 访问方式

1. **登录后访问**：用户登录后，在主页点击"设置"按钮
2. **直接访问**：通过 URL `/settings` 直接访问

## 技术实现

### 组件结构
```
UserSettingsPage.vue (主页面)
├── AvatarSelector.vue (头像选择器组件)
    ├── 默认头像选择
    ├── 自定义头像上传
    └── 头像裁剪功能
```

### 数据流
1. 用户设置页面从 `userStore` 获取当前用户信息
2. 头像选择器组件处理头像选择和裁剪
3. 保存时调用 `userStore.updateProfile()` 更新用户资料
4. 更新成功后返回主页

### 依赖组件
- `vue-cropperjs`：头像裁剪功能
- `Pinia`：状态管理
- `Vue Router`：路由管理

## 使用方法

### 1. 更换头像
1. 在头像选择器中选择"默认头像"或"自定义头像"
2. 如果选择自定义头像，点击"上传图片"选择本地文件
3. 使用裁剪工具调整头像区域
4. 点击"应用裁剪"确认选择

### 2. 修改用户名
1. 在用户名输入框中输入新的用户名
2. 用户名不能为空

### 3. 保存设置
1. 完成所有修改后，点击"保存设置"按钮
2. 系统会自动验证表单并保存到后端
3. 保存成功后返回主页

## 错误处理

- **表单验证**：用户名不能为空
- **网络错误**：保存失败时显示错误提示
- **图片处理**：支持常见的图片格式

## 样式特点

- **响应式设计**：适配移动端和桌面端
- **现代化UI**：使用渐变背景和毛玻璃效果
- **用户体验优化**：清晰的视觉反馈和过渡动画

## 开发说明

### 添加新的设置选项
1. 在 `settings` 响应式对象中添加新属性
2. 在模板中添加对应的表单控件
3. 更新 `updateProfile` 方法处理新数据

### 自定义样式
- 主要样式定义在 `UserSettingsPage.vue` 的 `<style>` 部分
- 使用 CSS 变量便于主题定制

## 注意事项

- 头像图片建议使用正方形比例
- 头像文件大小建议不超过 2MB
- 用户名长度限制根据后端API确定